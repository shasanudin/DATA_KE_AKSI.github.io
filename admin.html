<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - DATA KE AKSI</title>
    <link rel="stylesheet" href="css/style login.css">
</head>
<body>
    <div class="login-container">
        <header>
            <h2 style="font-size: 1.2rem; border-bottom: 2px solid #007bff; padding-bottom: 10px; display: inline-block;">DATA KE AKSI</h2>
            <p style="color: #666; font-size: 0.9rem; margin: 15px 0;">Silakan masuk untuk akses dashboard</p>
        </header>
        
        <form id="loginForm">
            <div class="input-group">
                <input type="text" id="username" placeholder="Username" required>
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Password" required>
            </div>
            <button type="submit">MASUK</button>
            <p id="message"></p>
        </form>
    </div>

    <script src="js/script login.js"></script>
    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAhQvRHBYX7dGW7QiSVN24cukmYHrN6d1c",
    authDomain: "data-ke-aksi-auth.firebaseapp.com",
    projectId: "data-ke-aksi-auth",
    storageBucket: "data-ke-aksi-auth.firebasestorage.app",
    messagingSenderId: "631382692174",
    appId: "1:631382692174:web:c10a099fb3021849eace1f",
    measurementId: "G-9NMBBB79EQ"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
<script type="module">
  // 1. Import library yang dibutuhkan
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // 2. Konfigurasi Firebase kamu
  const firebaseConfig = {
    apiKey: "AIzaSyAhQvRHBYX7dGW7QiSVN24cukmYHrN6d1c",
    authDomain: "data-ke-aksi-auth.firebaseapp.com",
    projectId: "data-ke-aksi-auth",
    storageBucket: "data-ke-aksi-auth.firebasestorage.app",
    messagingSenderId: "631382692174",
    appId: "1:631382692174:web:c10a099fb3021849eace1f",
    measurementId: "G-9NMBBB79EQ"
  };

  // 3. Inisialisasi Firebase & Auth
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // 4. Logika Login
  const loginForm = document.getElementById('loginForm');
  const message = document.getElementById('message');

  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Ambil input (Ingat: Firebase Auth butuh Email, bukan sekadar username biasa)
    const email = document.getElementById('username').value; 
    const pass = document.getElementById('password').value;

    signInWithEmailAndPassword(auth, email, pass)
      .then((userCredential) => {
        // Berhasil login
        message.style.color = "#28a745";
        message.innerText = "Login Berhasil! Mengalihkan...";
        
        setTimeout(() => {
          window.location.href = "dashboard.html";
        }, 1200);
      })
      .catch((error) => {
        // Gagal login
        message.style.color = "#dc3545";
        // Pesan error lebih ramah pengguna
        if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
            message.innerText = "Email atau Password salah!";
        } else {
            message.innerText = "Terjadi kesalahan: " + error.message;
        }
      });
  });
</script>
</body>
</html>
