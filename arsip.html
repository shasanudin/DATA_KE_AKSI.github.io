<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arsip Data DTSEN | TKSK Kec. Sumber</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    :root {
      --primary: #007bff;
      --secondary: #0056b3;
      --dark-bg: #1a1d20;
    }

    body { 
      font-family: 'Inter', sans-serif; 
      background-color: #f8f9fa; 
      color: #333; 
    }

    /* Hero Header Style */
    .archive-hero {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 60px 0;
      border-radius: 0 0 30px 30px;
      margin-bottom: 40px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    /* Card Archive Style */
    .card-archive {
      border: none;
      border-radius: 15px;
      background: white;
      transition: all 0.3s ease;
      border-left: 5px solid transparent;
    }
    .card-archive:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
      border-left-color: var(--primary);
    }

    .icon-box {
      width: 50px;
      height: 50px;
      background: #eef4ff;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 20px;
    }

    .btn-download {
      border-radius: 10px;
      font-weight: 600;
      padding: 8px 16px;
      transition: all 0.2s;
    }

    .btn-download:hover {
      background-color: #218838;
      color: white;
    }

    footer { background: var(--dark-bg); color: #999; }
  </style>
</head>
<body>

<div id="navbar"></div>

<section class="archive-hero">
  <div class="container text-center">
    <h1 class="display-4 font-weight-bold">Arsip Bulanan</h1>
    <p class="lead opacity-75">Riwayat data kesejahteraan sosial per periode laporan (Format CSV)</p>
  </div>
</section>

<main class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4 px-2">
    <h4 class="font-weight-bold mb-0">Daftar Dokumen</h4>
    <a href="index.html" class="btn btn-outline-secondary btn-sm rounded-pill px-3">
      <i class="fas fa-arrow-left mr-1"></i> Kembali
    </a>
  </div>

  <div class="row" id="archiveContainer">
    <div class="col-12 text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
      <p class="mt-2 text-muted">Menghubungkan ke server arsip...</p>
    </div>
  </div>
</main>

<footer class="py-5 mt-5">
  <div class="container text-center">
    <p class="mb-1 text-white fw-bold small">DARI DATA KE AKSI</p>
    <small>Â© 2026 TKSK Sumber & Forum Puskesos Kecamatan Sumber</small>
  </div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // 1. Load Navbar
  fetch('navbar.html')
    .then(r => r.text())
    .then(html => document.getElementById('navbar').innerHTML = html);

  // 2. Load Daftar Arsip
  fetch('data/archives.json')
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('archiveContainer');
      container.innerHTML = ""; 

      data.daftar_arsip.forEach(item => {
        // Pastikan nama file berakhiran .csv di JSON Anda nanti
        const fileName = item.file.replace('.json', '.csv');
        
        container.innerHTML += `
          <div class="col-md-6 mb-4">
            <div class="card card-archive shadow-sm p-2">
              <div class="card-body d-flex align-items-center">
                <div class="icon-box mr-3">
                  <i class="fas fa-file-csv"></i>
                </div>
                <div class="flex-grow-1">
                  <h5 class="mb-0 font-weight-bold text-dark">${item.periode}</h5>
                  <p class="mb-0 small text-muted">${item.keterangan}</p>
                </div>
                <div>
                  <a href="${fileName}" class="btn btn-success btn-sm btn-download" download>
                    <i class="fas fa-download mr-1"></i> CSV
                  </a>
                </div>
              </div>
            </div>
          </div>
        `;
      });
    })
    .catch(err => {
      document.getElementById('archiveContainer').innerHTML = `
        <div class="col-12">
          <div class="alert alert-light text-center border py-5">
            <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
            <p class="text-muted">Belum ada dokumen arsip tersedia untuk saat ini.</p>
          </div>
        </div>
      `;
    });
</script>
</body>
</html>
