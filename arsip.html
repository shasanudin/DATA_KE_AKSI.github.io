<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arsip Data DTSEN | TKSK Kec. Sumber</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="navbar"></div>

<main class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2>Arsip Bulanan DTSEN</h2>
      <p class="text-muted">Riwayat data kesejahteraan sosial Kecamatan Sumber per periode.</p>
    </div>
    <a href="index.html" class="btn btn-outline-secondary btn-sm">Kembali</a>
  </div>

  <div class="row" id="archiveContainer">
    <div class="col-12 text-center text-muted py-5">
      <p>Memuat daftar arsip...</p>
    </div>
  </div>
</main>

<footer class="py-4 text-center border-top">
  <small>Â© TKSK Sumber & Forum Puskesos Kecamatan Sumber</small>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Load Navbar
  fetch('navbar.html')
    .then(r => r.text())
    .then(html => document.getElementById('navbar').innerHTML = html);

  // Load Daftar Arsip
  fetch('data/archives.json')
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('archiveContainer');
      container.innerHTML = ""; // Bersihkan loading

      data.daftar_arsip.forEach(item => {
        container.innerHTML += `
          <div class="col-md-6 mb-3">
            <div class="card shadow-sm border-left-primary">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-1 font-weight-bold text-primary">${item.periode}</h5>
                  <p class="mb-0 small text-muted">${item.keterangan}</p>
                </div>
                <div class="btn-group">
                  <a href="${item.file}" class="btn btn-sm btn-primary" download>Unduh JSON</a>
                </div>
              </div>
            </div>
          </div>
        `;
      });
    })
    .catch(err => {
      document.getElementById('archiveContainer').innerHTML = `
        <div class="col-12 alert alert-warning">Belum ada data arsip yang tersedia.</div>
      `;
    });
</script>
</body>
</html>
