<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cetak Laporan DTSEN | TKSK Sumber</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f4f4f4; font-family: "Times New Roman", Times, serif; }
        .paper {
            background: white; width: 210mm; min-height: 297mm;
            padding: 20mm; margin: 20px auto; box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .kop-surat { border-bottom: 4px double #000; margin-bottom: 20px; padding-bottom: 10px; }
        .logo-kop { height: 75px; }
        .table-dtsen { font-size: 14px; }
        .qr-box { border: 1px solid #ccc; padding: 10px; display: inline-block; }
        
        /* ATURAN CETAK */
        @media print {
            body { background: none; padding: 0; }
            .no-print { display: none !important; } /* Menyembunyikan elemen no-print */
            #navbar { display: none !important; }   /* Memastikan navigasi hilang */
            header { display: none !important; }   /* Memastikan header atas hilang */
            .paper { 
                margin: 0; 
                box-shadow: none; 
                width: 100%; 
                padding: 10mm; /* Menyesuaikan margin saat cetak */
            }
            @page { margin: 0; } /* Menghilangkan header/footer otomatis browser */
        }
    </style>
</head>
<body>

<header class="container py-3 no-print">
    <div class="row align-items-center text-center">
        <div class="col-md-4 text-left">
            <img src="assets/img/logo/logo-tksk.png" alt="Logo" height="50">
            <img src="assets/img/logo/logo-puskesos.png" alt="Logo" height="50" class="ml-2">
        </div>
        <div class="col-md-4">
            <h3 class="mb-0 font-weight-bold">DARI DATA KE AKSI</h3>
            <small>Kecamatan Sumber</small>
        </div>
    </div>
</header>

<div id="navbar" class="no-print"></div>

<div class="container no-print py-4 text-center">
    <div class="card p-3 mb-4 shadow-sm">
        <h5>Panel Kendali Cetak</h5>
        <div class="row justify-content-center">
            <div class="col-md-4">
                <select id="tipeLaporan" class="form-control">
                    <option value="agregat">1. Agregasi Kecamatan (Total)</option>
                    <option value="prioritas">2. Daftar Prioritas (Ranking D1-2)</option>
                    <option value="wilayah">3. Laporan Per Kelurahan/Desa</option>
                </select>
            </div>
            <div class="col-md-3" id="selectWilayahContainer" style="display:none;">
                <select id="wilayahSelect" class="form-control"></select>
            </div>
            <div class="col-md-3">
                <button onclick="generateReport()" class="btn btn-success">Generate Data</button>
                <button onclick="window.print()" class="btn btn-primary">Cetak PDF</button>
            </div>
        </div>
    </div>
</div>

<div class="paper" id="cetakArea">
    <div class="kop-surat">
        <div class="row align-items-center text-center">
            <div class="col-2"><img src="assets/img/logo/logo-tksk.png" class="logo-kop"></div>
            <div class="col-8">
                <h5 class="mb-0">TENAGA KESEJAHTERAAN SOSIAL KECAMATAN (TKSK)</h5>
                <h4 class="font-weight-bold mb-0">FORUM PUSKESOS KECAMATAN SUMBER</h4>
                <h2 class="font-weight-bold" style="color: #0056b3;">DARI DATA KE AKSI</h2>
                <p class="mb-0 small">Alamat: Kantor Kecamatan Sumber Kab. Cirebon, Jawa Barat 45155</p>
            </div>
            <div class="col-2"><img src="assets/img/logo/logo-puskesos.png" class="logo-kop"></div>
        </div>
    </div>

    <div class="text-center mb-4">
        <h5 id="judulLaporan" class="font-weight-bold text-uppercase">LAPORAN AGREGASI DTSEN KECAMATAN</h5>
        <p>Periode Data: <span id="periodeText">-</span></p>
    </div>

    <div id="kontenData">
        <p class="text-center py-5">Silahkan klik "Generate Data" untuk memuat laporan.</p>
    </div>

    <div class="row mt-5">
        <div class="col-7">
            <p class="small text-muted">** Dokumen ini dihasilkan secara otomatis oleh sistem "Dari Data Ke Aksi" TKSK Sumber. Keaslian data dapat diverifikasi melalui QR Code di samping.</p>
        </div>
        <div class="col-5 text-center">
            <p>Sumber, <span id="tglSekarang"></span></p>
            <p class="mb-4">Mengetahui,<br>TKSK Kecamatan Sumber</p>
            <div id="qrcode" class="qr-box mb-2"></div>
            <p class="font-weight-bold mb-0">SHIDIQ HASANUDIN, S.IP</p>
            <small>ID Verifikasi: <span id="hashID">-</span></small>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="js/unduh.js"></script> <script>
        // Loader Navbar Sederhana
        fetch('navbar.html').then(r => r.text()).then(h => document.getElementById('navbar').innerHTML = h);
    </script>
    
</body>
</html>
